(this["webpackJsonptodo-app-client"]=this["webpackJsonptodo-app-client"]||[]).push([[0],{106:function(n,e,t){},107:function(n,e,t){},124:function(n,e,t){"use strict";t.r(e);var i,a,c,o,d,r,j=t(5),s=t(34),b=t.n(s),l=(t(94),t(86)),u=t(137),O=t(139),f=t(140),h=t(138),g=t(81),x=t(83),p=t(17),m=t(0),v=t(141),C=t(37),y=t(39),T=Object(y.a)(i||(i=Object(C.a)(["\n  query GetTodoList {\n    getTodoList {\n      id\n      name\n      info\n      editing\n    }\n  }\n"]))),L=t(59),k=t(24),I=t(48),$=t(20),w=t(77),S=t(143);!function(n){n.Id="id",n.Name="name",n.Info="info"}(a||(a={}));var A,N=Object(y.a)(c||(c=Object(C.a)(["\n  mutation addTodo(\n    $",": String!,\n    $",": String!,\n    $",": String\n  ) {\n    addTodo(todo: {\n      id: $",",\n      name: $",",\n      info: $","\n    }) {\n      id\n      name\n      info\n      editing\n    }\n  }\n"])),a.Id,a.Name,a.Info,a.Id,a.Name,a.Info),E=Object(y.a)(o||(o=Object(C.a)(["\n  mutation deleteTodo($id: String!) {\n    deleteTodo(id: $id) {\n      id\n    }\n  }\n"]))),D=Object(y.a)(d||(d=Object(C.a)(["\n  mutation setEditing($id: String!, $editing: Boolean!) {\n    setEditing(id: $id, editing: $editing) {\n      id\n      name\n      info\n      editing\n    }\n  }\n"]))),q=Object(y.a)(r||(r=Object(C.a)(["\n  mutation updateTodo(\n    $",": String!,\n    $",": String!,\n    $",": String\n  ) {\n    updateTodo(todo: {\n      id: $",",\n      name: $",",\n      info: $","\n    }) {\n      id\n      name\n      info\n      editing\n    }\n  }\n"])),a.Id,a.Name,a.Info,a.Id,a.Name,a.Info),B=t(23),J=t(3),F=function(){var n=Object(B.b)().loginWithRedirect;return Object(J.jsx)($.a,{variant:"primary",onClick:n,children:"Log In"})},G=function(){var n=Object(B.b)().logout;return Object(J.jsx)($.a,{variant:"secondary",onClick:function(){return n({returnTo:window.location.origin})},children:"Log Out"})},H=function(){return Object(B.b)().isAuthenticated?Object(J.jsx)(G,{}):Object(J.jsx)(F,{})},U=function(n){var e=n.todoList,t=n.setTodoList,i=Object(m.useState)(!1),c=Object(p.a)(i,2),o=c[0],d=c[1],r=Object(m.useState)(""),j=Object(p.a)(r,2),s=j[0],b=j[1],l=Object(m.useState)(""),u=Object(p.a)(l,2),O=u[0],f=u[1],h=Object(S.a)(N),g=Object(p.a)(h,1)[0],x=Object(B.b)().isAuthenticated,v=Object(m.useState)(window.location.origin.includes("localhost")),C=Object(p.a)(v,1)[0],y=function(){b(""),f("")},T=function(){d(!1),y()};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:"10px 5px"},children:[Object(J.jsx)("h1",{children:"Todo List"}),Object(J.jsx)($.a,{variant:"primary",onClick:function(){return d(!0)},disabled:!x,children:"Add Todo"}),C?Object(J.jsx)(H,{}):Object(J.jsx)(J.Fragment,{})]}),Object(J.jsxs)(I.a,{show:o,onHide:T,children:[Object(J.jsx)(I.a.Header,{closeButton:!0,children:Object(J.jsx)(I.a.Title,{children:"Add Todo"})}),Object(J.jsx)(I.a.Body,{children:Object(J.jsxs)("form",{className:"add",children:[Object(J.jsx)("label",{style:{margin:"0px 5px"},children:"Name"}),Object(J.jsx)("input",{value:s,onChange:function(n){return b(n.target.value)}}),Object(J.jsx)("label",{style:{margin:"0px 5px"},children:"Info"}),Object(J.jsx)("input",{value:O,onChange:function(n){return f(n.target.value)}})]})}),Object(J.jsxs)(I.a.Footer,{children:[Object(J.jsx)($.a,{variant:"secondary",onClick:T,children:"Cancel"}),Object(J.jsx)($.a,{variant:"primary",onClick:function(n){var i;n.preventDefault();var c={id:Object(w.v4)(),name:s,info:O,editing:!1};g({variables:(i={},Object(k.a)(i,a.Id,c.id),Object(k.a)(i,a.Name,c.name),Object(k.a)(i,a.Info,c.info),i)}),y(),t([].concat(Object(L.a)(e),[c])),d(!1)},children:"Add"})]})]})]})},V=t(144),X=Object(y.a)(A||(A=Object(C.a)(["\n  subscription TodoChanged {\n    todoChanged {\n      type\n      data {\n        id\n        name\n        info\n        editing\n      }\n    }\n  }\n"]))),Y=t(133),Z=t(134),z=t(135),K=t(136),P=(t(106),function(n){var e=n.todoList,t=n.setTodoList,i=Object(V.a)(X).data,a=Object(S.a)(E),c=Object(p.a)(a,1)[0],o=Object(S.a)(D),d=Object(p.a)(o,1)[0],r=Object(S.a)(q),s=Object(p.a)(r,1)[0],b=Object(B.b)().isAuthenticated,l=Object(m.useState)(!!window.location.origin.includes("localhost")||b),u=Object(p.a)(l,1)[0];Object(m.useEffect)((function(){if(i)if("ADD"===i.todoChanged.type){var n=i.todoChanged.data;0===e.filter((function(e){return e.id===n.id})).length&&t([].concat(Object(L.a)(e),[n]))}else if("UPDATE"===i.todoChanged.type){var a=i.todoChanged.data,c=e.filter((function(n){return n.id===a.id}))[0];a.name===c.name&&a.info===c.info||t(e.map((function(n){return n.id===a.id?{id:a.id,name:a.name,info:a.info,editing:!1}:n})))}else if("DELETE"===i.todoChanged.type){var o=i.todoChanged.data;1===e.filter((function(n){return n.id===o.id})).length&&t(e.filter((function(n){return n.id!==o.id})))}}),[i,e,t]);var O=Object(m.useState)(e.length>0?e.reduce((function(n,e){return n.editing?n:e.editing?e:{id:"",name:"",info:"",editing:!1}})):{id:"",name:"",info:"",editing:!1}),f=Object(p.a)(O,2),h=f[0],g=f[1],x=Object(m.useState)(!1),v=Object(p.a)(x,2),C=v[0],y=v[1],T=function(n,i){y(i),d({variables:{id:n,editing:i}}),t(e.map((function(e){if(e.id===n){var t=Object(j.a)(Object(j.a)({},e),{},{editing:i});return g(t),t}return e})))},k=function(n){return g(Object(j.a)(Object(j.a)({},h),{},{name:n.target.value}))},I=function(n){return g(Object(j.a)(Object(j.a)({},h),{},{info:n.target.value}))},w=function(){s({variables:{id:h.id,name:h.name,info:h.info}}),t(e.map((function(n){return n.id===h.id?{id:h.id,name:h.name,info:h.info,editing:!1}:n}))),y(!1)};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{className:"todoList header",children:[Object(J.jsx)("div",{children:"Name"}),Object(J.jsx)("div",{children:"Info"})]}),e.map((function(n){return n.editing?Object(J.jsxs)("div",{children:[Object(J.jsx)("hr",{}),Object(J.jsxs)("div",{className:"todoList",children:[Object(J.jsx)("input",{value:h.name,onChange:k}),Object(J.jsx)("input",{value:h.info,onChange:I}),Object(J.jsx)($.a,{variant:"secondary",onClick:function(){return T(n.id,!1)},children:Object(J.jsx)(z.a,{})}),Object(J.jsx)($.a,{variant:"primary",onClick:w,children:Object(J.jsx)(K.a,{})})]})]},n.id):Object(J.jsxs)("div",{children:[Object(J.jsx)("hr",{}),Object(J.jsxs)("div",{className:"todoList",children:[Object(J.jsx)("div",{children:n.name}),Object(J.jsx)("div",{children:n.info}),Object(J.jsx)($.a,{variant:"secondary",onClick:function(){return T(n.id,!0)},disabled:C||!u,children:Object(J.jsx)(Y.a,{})}),Object(J.jsx)($.a,{variant:"secondary",onClick:function(){return i=n.id,c({variables:{id:i}}),void t(e.filter((function(n){return n.id!==i})));var i},disabled:!u,children:Object(J.jsx)(Z.a,{})})]})]},n.id)}))]})}),R=(t(107),t(108),function(){var n=Object(v.a)(T),e=n.loading,t=n.error,i=n.data,a=i?i.getTodoList:null,c=Object(m.useState)(a),o=Object(p.a)(c,2),d=o[0],r=o[1];return e?Object(J.jsx)("p",{children:"Loading..."}):t?(console.log(t),Object(J.jsx)("p",{children:"Error"})):(i&&!d&&r(a),Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)(U,{todoList:d,setTodoList:r}),Object(J.jsx)(P,{todoList:d,setTodoList:r})]}))}),W=t(43),M=t(84),Q=t(13),_=Object(l.a)({uri:"https://todo-app-server-expanded.herokuapp.com/graphql"}),nn=new g.a({uri:"wss://todo-app-server-expanded.herokuapp.com/graphql",options:{reconnect:!0}}),en=Object(u.a)((function(n){var e=n.query,t=Object(W.e)(e);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),nn,_),tn=Object(x.a)((function(n,e){var t=e.headers;return{headers:Object(j.a)(Object(j.a)({},t),{},{Authorization:"cGV0ZXJAYXBvbGxvZ3JhcGhxbC5jb20"})}})),an=new O.a({link:tn.concat(en),cache:new f.a}),cn=window.location.origin.includes("localhost")?"http://localhost:3000/callback":"http://narnian12.github.io/todo-app-client/#/callback";b.a.render(Object(J.jsx)(B.a,{domain:"dev-pcwqkxo5.us.auth0.com",clientId:"A4YoJdfrCasvshDL06K9AfxpIpVif8DC",redirectUri:"".concat(cn),children:Object(J.jsx)(h.a,{client:an,children:Object(J.jsxs)(M.a,{children:[Object(J.jsx)(Q.a,{exact:!0,path:"/",children:Object(J.jsx)(R,{})}),Object(J.jsx)(Q.a,{path:"/callback",children:Object(J.jsx)(R,{})})]})})}),document.getElementById("root"))},94:function(n,e,t){}},[[124,1,2]]]);
//# sourceMappingURL=main.4cf93d70.chunk.js.map