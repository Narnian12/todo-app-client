(this["webpackJsonptodo-app-client"]=this["webpackJsonptodo-app-client"]||[]).push([[0],{108:function(n,e,t){"use strict";t.r(e);var i,a,c,o,d,r,j=t(5),s=t(28),b=t.n(s),u=(t(83),t(75)),l=t(121),O=t(123),f=t(124),h=t(122),g=t(72),p=t(74),x=t(15),m=t(1),v=t(125),C=t(30),y=t(32),T=Object(y.a)(i||(i=Object(C.a)(["\n  query GetTodoList {\n    getTodoList {\n      id\n      name\n      info\n      editing\n    }\n  }\n"]))),L=t(53),I=t(20),$=t(42),k=t(17),S=t(68),w=t(127);!function(n){n.Id="id",n.Name="name",n.Info="info"}(a||(a={}));var A,N=Object(y.a)(c||(c=Object(C.a)(["\n  mutation addTodo(\n    $",": String!,\n    $",": String!,\n    $",": String\n  ) {\n    addTodo(todo: {\n      id: $",",\n      name: $",",\n      info: $","\n    }) {\n      id\n      name\n      info\n      editing\n    }\n  }\n"])),a.Id,a.Name,a.Info,a.Id,a.Name,a.Info),E=Object(y.a)(o||(o=Object(C.a)(["\n  mutation deleteTodo($id: String!) {\n    deleteTodo(id: $id) {\n      id\n    }\n  }\n"]))),D=Object(y.a)(d||(d=Object(C.a)(["\n  mutation setEditing($id: String!, $editing: Boolean!) {\n    setEditing(id: $id, editing: $editing) {\n      id\n      name\n      info\n      editing\n    }\n  }\n"]))),q=Object(y.a)(r||(r=Object(C.a)(["\n  mutation updateTodo(\n    $",": String!,\n    $",": String!,\n    $",": String\n  ) {\n    updateTodo(todo: {\n      id: $",",\n      name: $",",\n      info: $","\n    }) {\n      id\n      name\n      info\n      editing\n    }\n  }\n"])),a.Id,a.Name,a.Info,a.Id,a.Name,a.Info),B=t(19),J=t(3),G=function(){var n=Object(B.b)().loginWithRedirect;return Object(J.jsx)(k.a,{variant:"primary",onClick:n,children:"Log In"})},F=function(){var n=Object(B.b)().logout;return Object(J.jsx)(k.a,{variant:"secondary",onClick:function(){return n({returnTo:window.location.origin})},children:"Log Out"})},H=function(){return Object(B.b)().isAuthenticated?Object(J.jsx)(F,{}):Object(J.jsx)(G,{})},U=function(n){var e=n.todoList,t=n.setTodoList,i=Object(m.useState)(!1),c=Object(x.a)(i,2),o=c[0],d=c[1],r=Object(m.useState)(""),j=Object(x.a)(r,2),s=j[0],b=j[1],u=Object(m.useState)(""),l=Object(x.a)(u,2),O=l[0],f=l[1],h=Object(w.a)(N),g=Object(x.a)(h,1)[0],p=Object(B.b)().isAuthenticated,v=function(){b(""),f("")},C=function(){d(!1),v()};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:"10px 5px"},children:[Object(J.jsx)("h1",{children:"Todo List"}),Object(J.jsx)(k.a,{variant:"primary",onClick:function(){return d(!0)},disabled:!p,children:"Add Todo"}),Object(J.jsx)(H,{})]}),Object(J.jsxs)($.a,{show:o,onHide:C,children:[Object(J.jsx)($.a.Header,{closeButton:!0,children:Object(J.jsx)($.a.Title,{children:"Add Todo"})}),Object(J.jsx)($.a.Body,{children:Object(J.jsxs)("form",{className:"add",children:[Object(J.jsx)("label",{style:{margin:"0px 5px"},children:"Name"}),Object(J.jsx)("input",{value:s,onChange:function(n){return b(n.target.value)}}),Object(J.jsx)("label",{style:{margin:"0px 5px"},children:"Info"}),Object(J.jsx)("input",{value:O,onChange:function(n){return f(n.target.value)}})]})}),Object(J.jsxs)($.a.Footer,{children:[Object(J.jsx)(k.a,{variant:"secondary",onClick:C,children:"Cancel"}),Object(J.jsx)(k.a,{variant:"primary",onClick:function(n){var i;n.preventDefault();var c={id:Object(S.v4)(),name:s,info:O,editing:!1};g({variables:(i={},Object(I.a)(i,a.Id,c.id),Object(I.a)(i,a.Name,c.name),Object(I.a)(i,a.Info,c.info),i)}),v(),t([].concat(Object(L.a)(e),[c])),d(!1)},children:"Add"})]})]})]})},V=t(128),X=Object(y.a)(A||(A=Object(C.a)(["\n  subscription TodoChanged {\n    todoChanged {\n      type\n      data {\n        id\n        name\n        info\n        editing\n      }\n    }\n  }\n"]))),Y=t(117),Z=t(118),z=t(119),K=t(120),P=(t(95),function(n){var e=n.todoList,t=n.setTodoList,i=Object(V.a)(X).data,a=Object(w.a)(E),c=Object(x.a)(a,1)[0],o=Object(w.a)(D),d=Object(x.a)(o,1)[0],r=Object(w.a)(q),s=Object(x.a)(r,1)[0],b=Object(B.b)().isAuthenticated;Object(m.useEffect)((function(){if(i)if("ADD"===i.todoChanged.type){var n=i.todoChanged.data;0===e.filter((function(e){return e.id===n.id})).length&&t([].concat(Object(L.a)(e),[n]))}else if("UPDATE"===i.todoChanged.type){var a=i.todoChanged.data,c=e.filter((function(n){return n.id===a.id}))[0];a.name===c.name&&a.info===c.info||t(e.map((function(n){return n.id===a.id?{id:a.id,name:a.name,info:a.info,editing:!1}:n})))}else if("DELETE"===i.todoChanged.type){var o=i.todoChanged.data;1===e.filter((function(n){return n.id===o.id})).length&&t(e.filter((function(n){return n.id!==o.id})))}}),[i,e,t]);var u=Object(m.useState)(e.length>0?e.reduce((function(n,e){return n.editing?n:e.editing?e:{id:"",name:"",info:"",editing:!1}})):{id:"",name:"",info:"",editing:!1}),l=Object(x.a)(u,2),O=l[0],f=l[1],h=Object(m.useState)(!1),g=Object(x.a)(h,2),p=g[0],v=g[1],C=function(n,i){v(i),d({variables:{id:n,editing:i}}),t(e.map((function(e){if(e.id===n){var t=Object(j.a)(Object(j.a)({},e),{},{editing:i});return f(t),t}return e})))},y=function(n){return f(Object(j.a)(Object(j.a)({},O),{},{name:n.target.value}))},T=function(n){return f(Object(j.a)(Object(j.a)({},O),{},{info:n.target.value}))},I=function(){s({variables:{id:O.id,name:O.name,info:O.info}}),t(e.map((function(n){return n.id===O.id?{id:O.id,name:O.name,info:O.info,editing:!1}:n}))),v(!1)};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{className:"todoList header",children:[Object(J.jsx)("div",{children:"Name"}),Object(J.jsx)("div",{children:"Info"})]}),e.map((function(n){return n.editing?Object(J.jsxs)("div",{children:[Object(J.jsx)("hr",{}),Object(J.jsxs)("div",{className:"todoList",children:[Object(J.jsx)("input",{value:O.name,onChange:y}),Object(J.jsx)("input",{value:O.info,onChange:T}),Object(J.jsx)(k.a,{variant:"secondary",onClick:function(){return C(n.id,!1)},children:Object(J.jsx)(z.a,{})}),Object(J.jsx)(k.a,{variant:"primary",onClick:I,children:Object(J.jsx)(K.a,{})})]})]},n.id):Object(J.jsxs)("div",{children:[Object(J.jsx)("hr",{}),Object(J.jsxs)("div",{className:"todoList",children:[Object(J.jsx)("div",{children:n.name}),Object(J.jsx)("div",{children:n.info}),Object(J.jsx)(k.a,{variant:"secondary",onClick:function(){return C(n.id,!0)},disabled:p||!b,children:Object(J.jsx)(Y.a,{})}),Object(J.jsx)(k.a,{variant:"secondary",onClick:function(){return i=n.id,c({variables:{id:i}}),void t(e.filter((function(n){return n.id!==i})));var i},disabled:!b,children:Object(J.jsx)(Z.a,{})})]})]},n.id)}))]})}),R=(t(96),t(97),function(){var n=Object(v.a)(T),e=n.loading,t=n.error,i=n.data,a=i?i.getTodoList:null,c=Object(m.useState)(a),o=Object(x.a)(c,2),d=o[0],r=o[1];return e?Object(J.jsx)("p",{children:"Loading..."}):t?(console.log(t),Object(J.jsx)("p",{children:"Error"})):(i&&!d&&r(a),Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)(U,{todoList:d,setTodoList:r}),Object(J.jsx)(P,{todoList:d,setTodoList:r})]}))}),W=t(37),M=Object(u.a)({uri:"https://todo-app-server-expanded.herokuapp.com/graphql"}),Q=new g.a({uri:"wss://todo-app-server-expanded.herokuapp.com/graphql",options:{reconnect:!0}}),_=Object(l.a)((function(n){var e=n.query,t=Object(W.e)(e);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),Q,M),nn=Object(p.a)((function(n,e){var t=e.headers;return{headers:Object(j.a)(Object(j.a)({},t),{},{Authorization:"cGV0ZXJAYXBvbGxvZ3JhcGhxbC5jb20"})}})),en=new O.a({link:nn.concat(_),cache:new f.a}),tn=window.location.origin.includes("localhost")?"http://localhost:3000/callback":"http://narnian12.github.io/todo-app-client/";b.a.render(Object(J.jsx)(B.a,{domain:"dev-pcwqkxo5.us.auth0.com",clientId:"A4YoJdfrCasvshDL06K9AfxpIpVif8DC",redirectUri:"".concat(tn),children:Object(J.jsx)(h.a,{client:en,children:Object(J.jsx)(R,{})})}),document.getElementById("root"))},83:function(n,e,t){},95:function(n,e,t){},96:function(n,e,t){}},[[108,1,2]]]);
//# sourceMappingURL=main.f1761cfb.chunk.js.map