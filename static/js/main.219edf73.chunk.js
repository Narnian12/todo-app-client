(this["webpackJsonptodo-app-client"]=this["webpackJsonptodo-app-client"]||[]).push([[0],{108:function(e,n,t){"use strict";t.r(n);var i,a,c,d,r,o,j=t(4),b=t(28),s=t.n(b),l=t(81),O=t(121),u=t(123),p=t(124),g=t(122),m=t(78),h=t(80),x=t(16),f=t(13),v=t(1),y=t.n(v),T=t(125),C=t(31),k=Object(C.a)(i||(i=Object(f.a)(["\n  query GetTodoList {\n    getTodoList {\n      id\n      name\n      editing\n      complete\n    }\n  }\n"]))),L=t(53),$=t(25),w=t(41),S=t(40),E=t(71),A=t(127);!function(e){e.Id="id",e.Name="name"}(a||(a={}));var I,N,D,F,B,q,z,G,J,H,X=Object(C.a)(c||(c=Object(f.a)(["\n  mutation addTodo(\n    $",": String!,\n    $",": String!\n  ) {\n    addTodo(todo: {\n      id: $",",\n      name: $","\n    }) {\n      id\n      name\n      editing\n      complete\n    }\n  }\n"])),a.Id,a.Name,a.Id,a.Name),Z=Object(C.a)(d||(d=Object(f.a)(["\n  mutation deleteTodo($id: String!) {\n    deleteTodo(id: $id) {\n      id\n    }\n  }\n"]))),P=Object(C.a)(r||(r=Object(f.a)(["\n  mutation setEditing($id: String!, $editing: Boolean!) {\n    setEditing(id: $id, editing: $editing) {\n      id\n      name\n      editing\n      complete\n    }\n  }\n"]))),U=Object(C.a)(o||(o=Object(f.a)(["\n  mutation updateTodo(\n    $",": String!,\n    $",": String!\n  ) {\n    updateTodo(todo: {\n      id: $",",\n      name: $","\n    }) {\n      id\n      name\n      editing\n      complete\n    }\n  }\n"])),a.Id,a.Name,a.Id,a.Name),V=t(20),Y=t(3),K=V.a.div(I||(I=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: lightblue;\n  padding: 5px;\n"]))),M=V.a.h1(N||(N=Object(f.a)(["\n  font-size: 24px;\n  margin: 0px;\n"]))),Q=V.a.form(D||(D=Object(f.a)(["\n  display: flex;\n  align-items: center;\n"]))),R=V.a.label(F||(F=Object(f.a)(["\n  width: 10%;\n  margin: 0px 5px;\n"]))),W=function(e){var n=e.todoList,t=e.setTodoList,i=Object(v.useState)(!1),c=Object(x.a)(i,2),d=c[0],r=c[1],o=Object(v.useState)(""),j=Object(x.a)(o,2),b=j[0],s=j[1],l=Object(A.a)(X),O=Object(x.a)(l,1)[0],u=function(){return s("")},p=function(){r(!1),u()},g=function(e){var i;e.preventDefault();var c={id:Object(E.v4)(),name:b,editing:!1,visible:!0};O({variables:(i={},Object($.a)(i,a.Id,c.id),Object($.a)(i,a.Name,c.name),i)}),u(),t([].concat(Object(L.a)(n),[c])),r(!1)};return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsxs)(K,{children:[Object(Y.jsx)(M,{children:"Todo List"}),Object(Y.jsx)(S.a,{variant:"primary",onClick:function(){return r(!0)},children:"Add Todo"})]}),Object(Y.jsxs)(w.a,{show:d,onHide:p,children:[Object(Y.jsx)(w.a.Header,{closeButton:!0,children:Object(Y.jsx)(w.a.Title,{children:"Add Todo"})}),Object(Y.jsx)(w.a.Body,{children:Object(Y.jsxs)(Q,{onSubmit:g,children:[Object(Y.jsx)(R,{children:"Name"}),Object(Y.jsx)("input",{value:b,onChange:function(e){return s(e.target.value)}})]})}),Object(Y.jsxs)(w.a.Footer,{children:[Object(Y.jsx)(S.a,{variant:"secondary",onClick:p,children:"Cancel"}),Object(Y.jsx)(S.a,{variant:"primary",onClick:g,children:"Add"})]})]})]})},_=t(128),ee=Object(C.a)(B||(B=Object(f.a)(["\n  subscription TodoChanged {\n    todoChanged {\n      type\n      data {\n        id\n        name\n        editing\n        complete\n      }\n    }\n  }\n"]))),ne=t(117),te=t(118),ie=t(119),ae=t(120),ce=V.a.div(q||(q=Object(f.a)(["\n  border: 0.5px solid lightblue;\n  background-color: aliceblue;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),de=Object(V.a)(ce)(z||(z=Object(f.a)(["\n  border-style: none;\n  text-align: start;\n  width: 90%;\n  margin: 0px 0px 0px 9px;\n  font-size: 14px;\n"]))),re=V.a.input(G||(G=Object(f.a)(["\n  text-align: start;\n  width: 90%;\n  margin: 5px;\n  font-size: 14px;\n"]))),oe=Object(V.a)(S.a)(J||(J=Object(f.a)(["\n  margin: 5px;\n"]))),je=function(e){var n=e.todoList,t=e.setTodoList,i=Object(_.a)(ee).data,a=Object(A.a)(Z),c=Object(x.a)(a,1)[0],d=Object(A.a)(P),r=Object(x.a)(d,1)[0],o=Object(A.a)(U),b=Object(x.a)(o,1)[0];Object(v.useEffect)((function(){if(i)if("ADD"===i.todoChanged.type){var e=i.todoChanged.data;0===n.filter((function(n){return n.id===e.id})).length&&t([].concat(Object(L.a)(n),[e]))}else if("UPDATE"===i.todoChanged.type){var a=i.todoChanged.data,c=n.filter((function(e){return e.id===a.id}))[0];a.name!==c.name&&t(n.map((function(e){return e.id===a.id?{id:a.id,name:a.name,editing:!1,visible:!0}:e})))}else if("DELETE"===i.todoChanged.type){var d=i.todoChanged.data;1===n.filter((function(e){return e.id===d.id})).length&&t(n.filter((function(e){return e.id!==d.id})))}}),[i,n,t]);var s=Object(v.useState)(n.length>0?n.reduce((function(e,n){return e.editing?e:n.editing?n:{id:"",name:"",info:"",editing:!1,visible:!0}})):{id:"",name:"",info:"",editing:!1,visible:!0}),l=Object(x.a)(s,2),O=l[0],u=l[1],p=Object(v.useState)(!1),g=Object(x.a)(p,2),m=g[0],h=g[1],f=function(e,i){h(i),r({variables:{id:e,editing:i}}),t(n.map((function(n){if(n.id===e){var t=Object(j.a)(Object(j.a)({},n),{},{editing:i});return u(t),t}return n})))},T=function(e){return u(Object(j.a)(Object(j.a)({},O),{},{name:e.target.value}))},C=function(){b({variables:{id:O.id,name:O.name}}),t(n.map((function(e){return e.id===O.id?{id:O.id,name:O.name,editing:!1,visible:!0}:e}))),h(!1)};return Object(Y.jsx)(Y.Fragment,{children:n.map((function(e){return e.visible?e.editing?Object(Y.jsx)(y.a.Fragment,{children:Object(Y.jsxs)(ce,{children:[Object(Y.jsx)(re,{value:O.name,onChange:T}),Object(Y.jsx)(oe,{variant:"secondary",onClick:function(){return f(e.id,!1)},children:Object(Y.jsx)(ie.a,{})}),Object(Y.jsx)(oe,{variant:"primary",onClick:C,children:Object(Y.jsx)(ae.a,{})})]})},e.id):Object(Y.jsx)(y.a.Fragment,{children:Object(Y.jsxs)(ce,{children:[Object(Y.jsx)(de,{children:e.name}),Object(Y.jsx)(oe,{variant:"secondary",onClick:function(){return f(e.id,!0)},disabled:m,children:Object(Y.jsx)(ne.a,{})}),Object(Y.jsx)(oe,{variant:"secondary",onClick:function(){return i=e.id,c({variables:{id:i}}),void t(n.filter((function(e){return e.id!==i})));var i},children:Object(Y.jsx)(te.a,{})})]})},e.id):Object(Y.jsx)(y.a.Fragment,{},e.id)}))})},be=(t(97),V.a.div(H||(H=Object(f.a)(["\n  max-width: 1000px;\n  margin: auto;\n"])))),se=function(){var e=Object(T.a)(k),n=e.loading,t=e.error,i=e.data,a=i?i.getTodoList:null,c=Object(v.useState)(a),d=Object(x.a)(c,2),r=d[0],o=d[1];return n?Object(Y.jsx)("p",{children:"Loading..."}):t?(console.log(t),Object(Y.jsx)("p",{children:"Error"})):(i&&!r&&o(a.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{visible:!0})}))),Object(Y.jsxs)(be,{children:[Object(Y.jsx)(W,{todoList:r,setTodoList:o}),Object(Y.jsx)(je,{todoList:r,setTodoList:o})]}))},le=t(35),Oe=Object(l.a)({uri:"https://todo-app-server-expanded.herokuapp.com/graphql"}),ue=new m.a({uri:"wss://todo-app-server-expanded.herokuapp.com/graphql",options:{reconnect:!0}}),pe=Object(O.a)((function(e){var n=e.query,t=Object(le.e)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),ue,Oe),ge=Object(h.a)((function(e,n){var t=n.headers;return{headers:Object(j.a)(Object(j.a)({},t),{},{Authorization:"cGV0ZXJAYXBvbGxvZ3JhcGhxbC5jb20"})}})),me=new u.a({link:ge.concat(pe),cache:new p.a});s.a.render(Object(Y.jsx)(g.a,{client:me,children:Object(Y.jsx)(se,{})}),document.getElementById("root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.219edf73.chunk.js.map