(this["webpackJsonptodo-app-client"]=this["webpackJsonptodo-app-client"]||[]).push([[0],{106:function(e,n,t){},107:function(e,n,t){},124:function(e,n,t){"use strict";t.r(n);var i,a,c,o,d,r,j=t(4),s=t(34),b=t.n(s),l=(t(94),t(86)),u=t(137),O=t(139),f=t(140),h=t(138),x=t(81),g=t(83),p=t(17),v=t(0),m=t.n(v),C=t(141),y=t(37),T=t(39),L=Object(T.a)(i||(i=Object(y.a)(["\n  query GetTodoList {\n    getTodoList {\n      id\n      name\n      info\n      editing\n    }\n  }\n"]))),k=t(59),I=t(24),$=t(48),w=t(20),S=t(77),A=t(143);!function(e){e.Id="id",e.Name="name",e.Info="info"}(a||(a={}));var N,E=Object(T.a)(c||(c=Object(y.a)(["\n  mutation addTodo(\n    $",": String!,\n    $",": String!,\n    $",": String\n  ) {\n    addTodo(todo: {\n      id: $",",\n      name: $",",\n      info: $","\n    }) {\n      id\n      name\n      info\n      editing\n    }\n  }\n"])),a.Id,a.Name,a.Info,a.Id,a.Name,a.Info),D=Object(T.a)(o||(o=Object(y.a)(["\n  mutation deleteTodo($id: String!) {\n    deleteTodo(id: $id) {\n      id\n    }\n  }\n"]))),q=Object(T.a)(d||(d=Object(y.a)(["\n  mutation setEditing($id: String!, $editing: Boolean!) {\n    setEditing(id: $id, editing: $editing) {\n      id\n      name\n      info\n      editing\n    }\n  }\n"]))),B=Object(T.a)(r||(r=Object(y.a)(["\n  mutation updateTodo(\n    $",": String!,\n    $",": String!,\n    $",": String\n  ) {\n    updateTodo(todo: {\n      id: $",",\n      name: $",",\n      info: $","\n    }) {\n      id\n      name\n      info\n      editing\n    }\n  }\n"])),a.Id,a.Name,a.Info,a.Id,a.Name,a.Info),F=t(23),J=t(3),G=function(){var e=Object(F.b)().loginWithRedirect;return Object(J.jsx)(w.a,{variant:"primary",onClick:e,children:"Log In"})},H=function(){var e=Object(F.b)().logout;return Object(J.jsx)(w.a,{variant:"secondary",onClick:function(){return e({returnTo:window.location.origin})},children:"Log Out"})},U=function(){return Object(F.b)().isAuthenticated?Object(J.jsx)(H,{}):Object(J.jsx)(G,{})},V=function(e){var n=e.todoList,t=e.setTodoList,i=Object(v.useState)(!1),c=Object(p.a)(i,2),o=c[0],d=c[1],r=Object(v.useState)(""),s=Object(p.a)(r,2),b=s[0],l=s[1],u=Object(v.useState)(""),O=Object(p.a)(u,2),f=O[0],h=O[1],x=Object(A.a)(E),g=Object(p.a)(x,1)[0],m=Object(F.b)().isAuthenticated,C=Object(v.useState)(window.location.origin.includes("localhost")),y=Object(p.a)(C,1)[0],T=function(){l(""),h("")},L=function(){d(!1),T()};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:"10px 5px"},children:[Object(J.jsx)("h1",{children:"Todo List"}),Object(J.jsx)(w.a,{variant:"primary",onClick:function(){return d(!0)},disabled:!m&&y,children:"Add Todo"}),Object(J.jsxs)("div",{style:{display:"flex",margin:"10px"},children:[Object(J.jsx)("h4",{children:"Search"}),Object(J.jsx)("input",{onChange:function(e){t(n.map((function(n){return n.name.startsWith(e.target.value)?Object(j.a)(Object(j.a)({},n),{},{visible:!0}):Object(j.a)(Object(j.a)({},n),{},{visible:!1})})))}})]}),y?Object(J.jsx)(U,{}):Object(J.jsx)(J.Fragment,{})]}),Object(J.jsxs)($.a,{show:o,onHide:L,children:[Object(J.jsx)($.a.Header,{closeButton:!0,children:Object(J.jsx)($.a.Title,{children:"Add Todo"})}),Object(J.jsx)($.a.Body,{children:Object(J.jsxs)("form",{className:"add",children:[Object(J.jsx)("label",{style:{margin:"0px 5px"},children:"Name"}),Object(J.jsx)("input",{value:b,onChange:function(e){return l(e.target.value)}}),Object(J.jsx)("label",{style:{margin:"0px 5px"},children:"Info"}),Object(J.jsx)("input",{value:f,onChange:function(e){return h(e.target.value)}})]})}),Object(J.jsxs)($.a.Footer,{children:[Object(J.jsx)(w.a,{variant:"secondary",onClick:L,children:"Cancel"}),Object(J.jsx)(w.a,{variant:"primary",onClick:function(e){var i;e.preventDefault();var c={id:Object(S.v4)(),name:b,info:f,editing:!1,visible:!0};g({variables:(i={},Object(I.a)(i,a.Id,c.id),Object(I.a)(i,a.Name,c.name),Object(I.a)(i,a.Info,c.info),i)}),T(),t([].concat(Object(k.a)(n),[c])),d(!1)},children:"Add"})]})]})]})},W=t(144),X=Object(T.a)(N||(N=Object(y.a)(["\n  subscription TodoChanged {\n    todoChanged {\n      type\n      data {\n        id\n        name\n        info\n        editing\n      }\n    }\n  }\n"]))),Y=t(133),Z=t(134),z=t(135),K=t(136),P=(t(106),function(e){var n=e.todoList,t=e.setTodoList,i=Object(W.a)(X).data,a=Object(A.a)(D),c=Object(p.a)(a,1)[0],o=Object(A.a)(q),d=Object(p.a)(o,1)[0],r=Object(A.a)(B),s=Object(p.a)(r,1)[0],b=Object(F.b)().isAuthenticated,l=Object(v.useState)(!window.location.origin.includes("localhost")||b),u=Object(p.a)(l,2),O=u[0],f=u[1];Object(v.useEffect)((function(){if(i)if("ADD"===i.todoChanged.type){var e=i.todoChanged.data;0===n.filter((function(n){return n.id===e.id})).length&&t([].concat(Object(k.a)(n),[e]))}else if("UPDATE"===i.todoChanged.type){var a=i.todoChanged.data,c=n.filter((function(e){return e.id===a.id}))[0];a.name===c.name&&a.info===c.info||t(n.map((function(e){return e.id===a.id?{id:a.id,name:a.name,info:a.info,editing:!1,visible:!0}:e})))}else if("DELETE"===i.todoChanged.type){var o=i.todoChanged.data;1===n.filter((function(e){return e.id===o.id})).length&&t(n.filter((function(e){return e.id!==o.id})))}}),[i,n,t]),Object(v.useEffect)((function(){f(b)}),[b]);var h=Object(v.useState)(n.length>0?n.reduce((function(e,n){return e.editing?e:n.editing?n:{id:"",name:"",info:"",editing:!1,visible:!0}})):{id:"",name:"",info:"",editing:!1,visible:!0}),x=Object(p.a)(h,2),g=x[0],C=x[1],y=Object(v.useState)(!1),T=Object(p.a)(y,2),L=T[0],I=T[1],$=function(e,i){I(i),d({variables:{id:e,editing:i}}),t(n.map((function(n){if(n.id===e){var t=Object(j.a)(Object(j.a)({},n),{},{editing:i});return C(t),t}return n})))},S=function(e){return C(Object(j.a)(Object(j.a)({},g),{},{name:e.target.value}))},N=function(e){return C(Object(j.a)(Object(j.a)({},g),{},{info:e.target.value}))},E=function(){s({variables:{id:g.id,name:g.name,info:g.info}}),t(n.map((function(e){return e.id===g.id?{id:g.id,name:g.name,info:g.info,editing:!1,visible:!0}:e}))),I(!1)};return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)("div",{className:"todoList header",children:[Object(J.jsx)("div",{children:"Name"}),Object(J.jsx)("div",{children:"Info"})]}),n.map((function(e){return e.visible?e.editing?Object(J.jsxs)("div",{children:[Object(J.jsx)("hr",{}),Object(J.jsxs)("div",{className:"todoList",children:[Object(J.jsx)("input",{value:g.name,onChange:S}),Object(J.jsx)("input",{value:g.info,onChange:N}),Object(J.jsx)(w.a,{variant:"secondary",onClick:function(){return $(e.id,!1)},children:Object(J.jsx)(z.a,{})}),Object(J.jsx)(w.a,{variant:"primary",onClick:E,children:Object(J.jsx)(K.a,{})})]})]},e.id):Object(J.jsxs)("div",{children:[Object(J.jsx)("hr",{}),Object(J.jsxs)("div",{className:"todoList",children:[Object(J.jsx)("div",{children:e.name}),Object(J.jsx)("div",{children:e.info}),Object(J.jsx)(w.a,{variant:"secondary",onClick:function(){return $(e.id,!0)},disabled:L||!O,children:Object(J.jsx)(Y.a,{})}),Object(J.jsx)(w.a,{variant:"secondary",onClick:function(){return i=e.id,c({variables:{id:i}}),void t(n.filter((function(e){return e.id!==i})));var i},disabled:!O,children:Object(J.jsx)(Z.a,{})})]})]},e.id):Object(J.jsx)(m.a.Fragment,{},e.id)}))]})}),R=(t(107),t(108),function(){var e=Object(C.a)(L),n=e.loading,t=e.error,i=e.data,a=i?i.getTodoList:null,c=Object(v.useState)(a),o=Object(p.a)(c,2),d=o[0],r=o[1];return n?Object(J.jsx)("p",{children:"Loading..."}):t?(console.log(t),Object(J.jsx)("p",{children:"Error"})):(i&&!d&&r(a.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{visible:!0})}))),Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)(V,{todoList:d,setTodoList:r}),Object(J.jsx)(P,{todoList:d,setTodoList:r})]}))}),M=t(43),Q=t(84),_=t(13),ee=Object(l.a)({uri:"https://todo-app-server-expanded.herokuapp.com/graphql"}),ne=new x.a({uri:"wss://todo-app-server-expanded.herokuapp.com/graphql",options:{reconnect:!0}}),te=Object(u.a)((function(e){var n=e.query,t=Object(M.e)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),ne,ee),ie=Object(g.a)((function(e,n){var t=n.headers;return{headers:Object(j.a)(Object(j.a)({},t),{},{Authorization:"cGV0ZXJAYXBvbGxvZ3JhcGhxbC5jb20"})}})),ae=new O.a({link:ie.concat(te),cache:new f.a}),ce=window.location.origin.includes("localhost")?"http://localhost:3000/callback":"http://narnian12.github.io/todo-app-client/#/callback";b.a.render(Object(J.jsx)(F.a,{domain:"dev-pcwqkxo5.us.auth0.com",clientId:"A4YoJdfrCasvshDL06K9AfxpIpVif8DC",redirectUri:"".concat(ce),children:Object(J.jsx)(h.a,{client:ae,children:Object(J.jsxs)(Q.a,{children:[Object(J.jsx)(_.a,{exact:!0,path:"/",children:Object(J.jsx)(R,{})}),Object(J.jsx)(_.a,{path:"/callback",children:Object(J.jsx)(R,{})})]})})}),document.getElementById("root"))},94:function(e,n,t){}},[[124,1,2]]]);
//# sourceMappingURL=main.f366d2d5.chunk.js.map