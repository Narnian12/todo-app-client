(this["webpackJsonptodo-app-client"]=this["webpackJsonptodo-app-client"]||[]).push([[0],{108:function(e,n,t){"use strict";t.r(n);var i,a,c,d,o,r,j,l=t(4),b=t(28),s=t.n(b),u=t(81),O=t(121),p=t(123),m=t(124),g=t(122),h=t(78),f=t(80),x=t(16),v=t(12),C=t(1),y=t.n(C),T=t(125),$=t(29),k=Object($.a)(i||(i=Object(v.a)(["\n  query GetTodoList {\n    getTodoList {\n      id\n      name\n      editing\n      complete\n    }\n  }\n"]))),L=t(53),w=t(25),S=t(41),E=t(40),N=t(71),A=t(127);!function(e){e.Id="id",e.Name="name"}(a||(a={}));var I,B,D,F,q,z,G,J,H,P,X,Z,M=Object($.a)(c||(c=Object(v.a)(["\n  mutation addTodo(\n    $",": String!,\n    $",": String!\n  ) {\n    addTodo(todo: {\n      id: $",",\n      name: $","\n    }) {\n      id\n      name\n      editing\n      complete\n    }\n  }\n"])),a.Id,a.Name,a.Id,a.Name),U=Object($.a)(d||(d=Object(v.a)(["\n  mutation deleteTodo($id: String!) {\n    deleteTodo(id: $id) {\n      id\n    }\n  }\n"]))),V=Object($.a)(o||(o=Object(v.a)(["\n  mutation setEditing($id: String!, $editing: Boolean!) {\n    setEditing(id: $id, editing: $editing) {\n      id\n      name\n      editing\n      complete\n    }\n  }\n"]))),Y=Object($.a)(r||(r=Object(v.a)(["\n  mutation setComplete($id: String!, $complete: Boolean!) {\n    setComplete(id: $id, complete: $complete) {\n      id\n      name\n      editing\n      complete\n    }\n  }\n"]))),K=Object($.a)(j||(j=Object(v.a)(["\n  mutation updateTodo(\n    $",": String!,\n    $",": String!\n  ) {\n    updateTodo(todo: {\n      id: $",",\n      name: $","\n    }) {\n      id\n      name\n      editing\n      complete\n    }\n  }\n"])),a.Id,a.Name,a.Id,a.Name),Q=t(18),R=t(3),W=Q.a.div(I||(I=Object(v.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: lightblue;\n  padding: 5px;\n"]))),_=Q.a.h1(B||(B=Object(v.a)(["\n  font-size: 24px;\n  margin: 0px;\n"]))),ee=Q.a.form(D||(D=Object(v.a)(["\n  display: flex;\n  align-items: center;\n"]))),ne=Q.a.label(F||(F=Object(v.a)(["\n  width: 15%;\n  margin: 5px;\n"]))),te=Q.a.input(q||(q=Object(v.a)(["\n  width: 100%;\n"]))),ie=function(e){var n=e.todoList,t=e.setTodoList,i=Object(C.useState)(!1),c=Object(x.a)(i,2),d=c[0],o=c[1],r=Object(C.useState)(""),j=Object(x.a)(r,2),l=j[0],b=j[1],s=Object(A.a)(M),u=Object(x.a)(s,1)[0],O=function(){return b("")},p=function(){o(!1),O()},m=function(e){var i;e.preventDefault();var c={id:Object(N.v4)(),name:l,editing:!1,visible:!0,complete:!1};u({variables:(i={},Object(w.a)(i,a.Id,c.id),Object(w.a)(i,a.Name,c.name),i)}),O(),t([].concat(Object(L.a)(n),[c])),o(!1)};return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(W,{children:[Object(R.jsx)(_,{children:"Todo List"}),Object(R.jsx)(E.a,{variant:"primary",onClick:function(){return o(!0)},children:"Add Todo"})]}),Object(R.jsxs)(S.a,{show:d,onHide:p,children:[Object(R.jsx)(S.a.Header,{closeButton:!0,children:Object(R.jsx)(S.a.Title,{children:"Add Todo"})}),Object(R.jsx)(S.a.Body,{children:Object(R.jsxs)(ee,{onSubmit:m,children:[Object(R.jsx)(ne,{children:"Name"}),Object(R.jsx)(te,{value:l,onChange:function(e){return b(e.target.value)}})]})}),Object(R.jsxs)(S.a.Footer,{children:[Object(R.jsx)(E.a,{variant:"secondary",onClick:p,children:"Cancel"}),Object(R.jsx)(E.a,{variant:"primary",onClick:m,children:"Add"})]})]})]})},ae=t(128),ce=Object($.a)(z||(z=Object(v.a)(["\n  subscription TodoChanged {\n    todoChanged {\n      type\n      data {\n        id\n        name\n        editing\n        complete\n      }\n    }\n  }\n"]))),de=t(117),oe=t(118),re=t(119),je=t(120),le=Q.a.div(G||(G=Object(v.a)(["\n  border: 0.5px solid lightblue;\n  background-color: aliceblue;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),be=Q.a.input(J||(J=Object(v.a)(["\n  margin: 5px;\n"]))),se=Object(Q.a)(le)(H||(H=Object(v.a)(["\n  border-style: none;\n  text-align: start;\n  width: 90%;\n  margin: 0px 0px 0px 9px;\n  font-size: 14px;\n  text-decoration: ",";\n"])),(function(e){return e.complete?"line-through":"none"})),ue=Q.a.input(P||(P=Object(v.a)(["\n  text-align: start;\n  width: 90%;\n  margin: 5px;\n  font-size: 14px;\n"]))),Oe=Object(Q.a)(E.a)(X||(X=Object(v.a)(["\n  margin: 5px;\n"]))),pe=function(e){var n=e.todoList,t=e.setTodoList,i=Object(ae.a)(ce).data,a=Object(A.a)(U),c=Object(x.a)(a,1)[0],d=Object(A.a)(V),o=Object(x.a)(d,1)[0],r=Object(A.a)(Y),j=Object(x.a)(r,1)[0],b=Object(A.a)(K),s=Object(x.a)(b,1)[0];Object(C.useEffect)((function(){if(i){if("ADD"===i.todoChanged.type){var e=i.todoChanged.data;0===n.filter((function(n){return n.id===e.id})).length&&t([].concat(Object(L.a)(n),[e]))}else if("UPDATE"===i.todoChanged.type){var a=i.todoChanged.data,c=n.filter((function(e){return e.id===a.id}))[0];a.name!==c.name&&t(n.map((function(e){return e.id===a.id?{id:a.id,name:a.name,editing:!1,visible:!0,complete:!1}:e})))}else if("DELETE"===i.todoChanged.type){var d=i.todoChanged.data;1===n.filter((function(e){return e.id===d.id})).length&&t(n.filter((function(e){return e.id!==d.id})))}else if("COMPLETE"===i.todoChanged.type){var o,r=i.todoChanged.data;(null===(o=n.find((function(e){return e.id===r.id})))||void 0===o?void 0:o.complete)!==r.complete&&t(n.map((function(e){return e.id===r.id?Object(l.a)(Object(l.a)({},e),{},{complete:!e.complete}):e})))}i.todoChanged.type="NONE"}}),[i,n,t]);var u=Object(C.useState)(n.length>0?n.reduce((function(e,n){return e.editing?e:n.editing?n:{id:"",name:"",info:"",editing:!1,visible:!0,complete:!1}})):{id:"",name:"",info:"",editing:!1,visible:!0,complete:!1}),O=Object(x.a)(u,2),p=O[0],m=O[1],g=Object(C.useState)(!1),h=Object(x.a)(g,2),f=h[0],v=h[1],T=function(e,i){v(i),o({variables:{id:e,editing:i}}),t(n.map((function(n){if(n.id===e){var t=Object(l.a)(Object(l.a)({},n),{},{editing:i});return m(t),t}return n})))},$=function(e){return m(Object(l.a)(Object(l.a)({},p),{},{name:e.target.value}))},k=function(){s({variables:{id:p.id,name:p.name}}),t(n.map((function(e){return e.id===p.id?{id:p.id,name:p.name,editing:!1,visible:!0,complete:!1}:e}))),v(!1)};return Object(R.jsx)(R.Fragment,{children:n.map((function(e){return e.editing?Object(R.jsx)(y.a.Fragment,{children:Object(R.jsxs)(le,{children:[Object(R.jsx)(ue,{value:p.name,onChange:$}),Object(R.jsx)(Oe,{variant:"secondary",onClick:function(){return T(e.id,!1)},children:Object(R.jsx)(re.a,{})}),Object(R.jsx)(Oe,{variant:"primary",onClick:k,children:Object(R.jsx)(je.a,{})})]})},e.id):Object(R.jsx)(y.a.Fragment,{children:Object(R.jsxs)(le,{children:[Object(R.jsx)(be,{type:"checkbox",checked:e.complete,onChange:function(){return function(e){var i=n.find((function(n){return n.id===e}));j({variables:{id:e,complete:!(null===i||void 0===i?void 0:i.complete)}}),t(n.map((function(e){return e.id===(null===i||void 0===i?void 0:i.id)?Object(l.a)(Object(l.a)({},i),{},{complete:!(null===i||void 0===i?void 0:i.complete)}):e})))}(e.id)}}),Object(R.jsx)(se,{complete:e.complete,children:e.name}),Object(R.jsx)(Oe,{variant:"secondary",onClick:function(){return T(e.id,!0)},disabled:f||e.complete,children:Object(R.jsx)(de.a,{})}),Object(R.jsx)(Oe,{variant:"secondary",onClick:function(){return i=e.id,c({variables:{id:i}}),void t(n.filter((function(e){return e.id!==i})));var i},children:Object(R.jsx)(oe.a,{})})]})},e.id)}))})},me=(t(97),Q.a.div(Z||(Z=Object(v.a)(["\n  max-width: 1000px;\n  margin: auto;\n"])))),ge=function(){var e=Object(T.a)(k),n=e.loading,t=e.error,i=e.data,a=i?i.getTodoList:null,c=Object(C.useState)(a),d=Object(x.a)(c,2),o=d[0],r=d[1];return n?Object(R.jsx)("p",{children:"Loading..."}):t?(console.log(t),Object(R.jsx)("p",{children:"Error"})):(i&&!o&&r(a.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{visible:!0})}))),Object(R.jsxs)(me,{children:[Object(R.jsx)(ie,{todoList:o,setTodoList:r}),Object(R.jsx)(pe,{todoList:o,setTodoList:r})]}))},he=t(35),fe=Object(u.a)({uri:"https://todo-app-server-expanded.herokuapp.com/graphql"}),xe=new h.a({uri:"wss://todo-app-server-expanded.herokuapp.com/graphql",options:{reconnect:!0}}),ve=Object(O.a)((function(e){var n=e.query,t=Object(he.e)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),xe,fe),Ce=Object(f.a)((function(e,n){var t=n.headers;return{headers:Object(l.a)(Object(l.a)({},t),{},{Authorization:"cGV0ZXJAYXBvbGxvZ3JhcGhxbC5jb20"})}})),ye=new p.a({link:Ce.concat(ve),cache:new m.a});s.a.render(Object(R.jsx)(g.a,{client:ye,children:Object(R.jsx)(ge,{})}),document.getElementById("root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.5d226c0b.chunk.js.map